# Лямбда-функции. Списки захвата. Замыкания

## Captures in lambdas

Вот когда мы лямбде мы не видим локальные переменные, а вот для того, чтобы мы имелеи доспут нужно их захваитиь

И это делается для того, чтобы захватить нужно передать в квадратные скобки

```c++
    std::vector v = {1, 2, 3, 4, 5};

    int c = 3;

    auto cmp = [с](int x, int y) {
        return (x - c) * (x - c) 
        < (y - c) * (y - c);
    };

    std::sort(v.begin(), v.end(), cmp);
```

Вопрос где хранится эта переменная? ... Чуть позже

Правда ли, что sub скопируется? Потому, то что мы передаем копируется в поле лямбды (там рельано класс создается смотри cpp_insight), ну вот так как нам сделать по указателю

```c++
    std::vector<std::string> v = {"dsa", "bavae", "fefeaa"};

    std::string sub = "av";

    auto con_sub = [sub -> &sub](const std::string& str) {
        return str.find(sub) != std::string::npos;
    };

    auto iter = std:find_if(v.begin(), v.end(),
    con_sub);

    std::cout << *iter;
```

А сохранили ли мы константную ссылку или нет? Мы захватили по не константной ссылке.

А что если мы захватили по значению, и потом меняем? Нет мы так не можем... Мы хотим, чтобы оператор круглые скобки был константный метод....

Что же происходит???? Почему же то, что мы захватили по ссылке можем менять, а по значению не можем...

Как сделать, чтобы лямбда могла менять захваченные переменные ? **Нужно Mutable**

```c++
auto con_sub = [sub](const std::string& str) mutable {
    return str.find(sub) != std::string::npos;
};
```




